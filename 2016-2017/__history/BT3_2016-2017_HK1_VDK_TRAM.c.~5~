#INCLUDE<16F887.H>
#FUSES HS
#USE DELAY(CLOCK=20M)

#USE RS232(BAUD=4800, XMIT=PIN_C6,RCV=PIN_C7)

UNSIGNED CHAR DATA;
UNSIGNED INT8 STATUS;

#INT_RDA
VOID NGAT_UART()
{
   DATA=GETC();
   IF(DATA='0')      STATUS=0;
   ELSE IF(DATA='1') STATUS=1;
   ELSE IF(DATA='2') STATUS=2;
   ELSE IF(DATA='3') STATUS=3;
   ELSE IF(DATA='T') STATUS=4;
}

VOID MAIN()
{
   SET_TRIS_B(0X00);
   ENABLE_INTERRUPTS(GLOBAL);
   ENABLE_INTERRUPTS(INT_RDA);
   WHILE(TRUE)
   {
      OUTPUT_D(0B00111100);
      DELAY_MS(2000);
      OUTPUT_D(0X00);
      IF(STATUS==0)        OUTPUT_D(0X00);
      ELSE IF(STATUS==1)   OUTPUT_D(0B00000001);
      ELSE IF(STATUS==2)   OUTPUT_D(0B00000010);
      ELSE IF(STATUS==3)   OUTPUT_D(0B00000100);
      ELSE IF(STATUS==4)
      {
         OUTPUT_D(0XFF);
         DELAY_MS(1000);
         OUTPUT_D(0X00);
         DELAY_MS(1000);
      }
   }
}
